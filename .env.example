# AppView Configuration
# Copy this to .env and customize as needed

# Relay/Firehose Configuration
# Primary relay source (usually Bluesky's main relay)
# RELAY_URL=wss://bsky.network/xrpc/com.atproto.sync.subscribeRepos

# Additional relay sources (comma-separated)
# Use this to crawl independent PDS instances that aren't in Bluesky's relay
# Example: atproto.africa hosts blacksky.app and other independent instances
# ADDITIONAL_RELAY_URLS=wss://atproto.africa/xrpc/com.atproto.sync.subscribeRepos

# Constellation Integration (enhanced stats from microcosm.blue)
# Set to false to disable and avoid timeout errors
CONSTELLATION_ENABLED=false

# Constellation settings (only used if CONSTELLATION_ENABLED=true)
CONSTELLATION_URL=https://constellation.microcosm.blue
CONSTELLATION_CACHE_TTL=60
CONSTELLATION_TIMEOUT=10000
# Rate limiting configuration to avoid 429 errors
CONSTELLATION_REQUEST_DELAY=100
CONSTELLATION_MAX_RETRIES=3
CONSTELLATION_RETRY_DELAY=1000

# Osprey Integration (federated labeling)
OSPREY_ENABLED=false

# Backfill Configuration
# Set BACKFILL_DAYS to automatically run historical backfill when the system starts
# 0 = disabled (no backfill)
# -1 = total backfill (entire available history)
# >0 = backfill X days of history (e.g., 7 for last 7 days)
BACKFILL_DAYS=0

# Backfill Resource Throttling (optional - defaults shown below)
# Uncomment and adjust based on your server's capacity
# BACKFILL_BATCH_SIZE=5              # Events to process before delaying
# BACKFILL_BATCH_DELAY_MS=2000       # Milliseconds to wait between batches
# BACKFILL_MAX_CONCURRENT=2          # Maximum concurrent processing operations
# BACKFILL_MAX_MEMORY_MB=512         # Pause if memory exceeds this limit
# BACKFILL_USE_IDLE=true             # Use idle processing time
# BACKFILL_DB_POOL_SIZE=2            # Database connection pool size for backfill

# Data Retention
DATA_RETENTION_DAYS=0
